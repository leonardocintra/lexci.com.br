{% extends "core/base.html" %} 

{% load pagination %}

{% block content %}
    <ol class="breadcrumb">
        <li><a href="{% url 'management' %}">Admin Lexci</a></li>
        <li class="active">Pacientes</li>
    </ol>

    <div class="page-header">
        <h1><i class="fa fa-users" aria-hidden="true"></i> Pacientes <small>Exibindo pacientes cadastrados</small></h1>
    </div>
    <div class="row" style="padding-bottom: 20px;">
        <div class="col-sm-10">
            <div class="col-sm-2">
                <a href="{% url 'paciente:paciente_create' %}" class="btn btn-success">
                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Novo paciente
                </a> 
            </div>
            {# texto de pesquisa #}
            <div class="col-sm-6">
                <form action="{% url 'paciente:paciente_list' %}" role="search">
                    <div class="input-group">
                        <input type="text" name="q" class="form-control" placeholder="Buscar paciente por nome ou CPF">
                        <span class="input-group-btn">
                            <button class="btn btn-warning" type="submit"><span class="glyphicon glyphicon-search" aria-hidden="true"></span> Buscar</button>
                        </span>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="row">
        
        
         
        <h5>
            <span class="glyphicon glyphicon-list" aria-hidden="true"></span> 
            Quantidade de pacientes cadastradas: <span class="label label-default">{{ total_pacientes }}</span>
        </h5>

        {% if paciente_list %}
        <table class="table table-striped">
            <thead>
                <tr>
                    <th></th>
                    <th>Nome</th>
                    <th>CPF</th>
                    <th>Ativo</th>
                </tr>
            </thead>
            <tbody>
            {% for paciente in paciente_list %}
                <tr>
                    <th>#{{ paciente.id }}</th>
                    <th><a href="{% url 'paciente:paciente_detail' paciente.pk %}">{{ paciente.nome }}</a></th>
                    <th>{{ paciente.cpf }}</th>
                    <th>
                        {% if paciente.ativo %}
                            <span class="glyphicon glyphicon-ok" aria-hidden="true"></span> 
                        {% else %}
                            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span> 
                        {% endif %}
                    </th>
                </tr>
            {% endfor %}
            </tbody>
        </table>

        {% pagination request paginator page_obj %}

        {% else %}
            <div class="alert alert-warning col-md-4">
                <strong>Ops!</strong> Nenhum paciente encontrado. Tente novamente.
            </div>        
        {% endif %}
    </div>
{% endblock content %}